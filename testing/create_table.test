#!/usr/bin/env tclsh

set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_execsql_test_in_memory_any_error create_table_one_unique_set {
    CREATE TABLE t4 (a, unique(b));
}

do_execsql_test_on_specific_db {:memory:} create_table_same_uniques_and_primary_keys {
    CREATE TABLE t2 (a,b, unique(a,b), primary key(a,b));
} {}

do_execsql_test_on_specific_db {:memory:} create_table_unique_contained_in_primary_keys {
    CREATE TABLE t4 (a,b, primary key(a,b), unique(a));
} {}

# https://github.com/tursodatabase/turso/issues/2686
do_execsql_test_on_specific_db {:memory:} create_table_rowid_unique_regression_test {
  create table u(x integer unique primary key);
  insert into u values (1),(2),(3);
  select * from u where x > 2;
} {3}

# https://github.com/tursodatabase/turso/issues/2886#issuecomment-3244885481
do_execsql_test_on_specific_db {:memory:} create_table_with_empty_string_name {
  create table ''('' INTEGER) strict;
  insert into '' values(9);
  select * from '';
} {9}
